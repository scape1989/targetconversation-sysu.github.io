<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!--Open Graph Related Stuff-->
  <meta property="og:title" content="TOC:Target-oriented Conversation" />
  <meta property="og:url" content="https://targetconversation-sysu.github.io/" />
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="TOC:Target-oriented Conversation" />
  <title>TOC: Target-oriented Conversation</title>
  <script src="/static/js/vendor/jquery.js"></script>
  <script src="/static/js/jquery-2.1.3.min.js"></script>
  <link rel="shortcut icon" href="/static/img/favicon2.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.css" />
  <link rel="stylesheet" href="/static/css/foundation.css">
  <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/css/main.css">
  <link rel="stylesheet" type="text/css" href="/static/css/main.183a8f.css" media="screen,projection">
</head>

<body class="off-canvas hide-extras" style="min-width: 1000px; min-height: 500px;overflow: auto;">
  <div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="/">Target-oriented Conversation</a>
        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse" id="navbar-main">
        <ul class="nav navbar-nav">
          <li>
            <a href="/">Home</a>
          </li>
          <li>
            <a href="/papers">Papers</a>
          </li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">Dataset
              <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="/dataset/Medical">Medical Dialogue</a></li>
              <li><a href="/dataset/TGODC">Target-Guided Open-Domain Conversation</a></li>
            </ul>
          </li>
          <li class="active">
            <a href="/demo">Demo</a>
          </li>
          <li>
            <a href="/people">People</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="http://www.sysu.edu.cn/2012/cn/index.htm">
              <img style="height:25px;" src="/static/img/logo.png">
            </a>
          </li>
          <li>
            <a href="https://www.cmu.edu/">
              <img style="height:25px;" src="/static/img/cmu_logo.png">
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <script defer="" src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  <div class="row">
  <div class="large-12 columns" style="margin-left:-3.2em">
    <h1 style="font-size:30px; color:grey; font-weight: 200;margin-top:1.2em;margin-left:1.8em">Instruction</h1>
  </div>
  <div class="row">
    <div class="large-12 columns" style="-webkit-text-size-adjust:none; -ms-text-size-adjust:none; -moz-text-size-adjust:none; text-size-adjust:none;">
      <p style="margin: 0 4em 1em;font-size:15px; font-weight: 200;" align="justify">
        &emsp;In this part, we put two videos below to show the process for using two versions of our demo.
        <br>&emsp;If you want to use our demo in the demonstration,
        please select or change the version, after that the bot will send the first message.
        Then if you send to the bot, it will chat with you to arrive a target. Sometimes you may
        wait a moment for the response.
        <br>&emsp;When the bot arrives the target, it outputs the result simultaneously. For example:
        <br>&emsp;<br>&emsp;(1) [SUCCESS] target: '{...}'.
        <br>&emsp;<br>&emsp;(2) [FAIL] out of the max dialogue turns, target: '{...}'.
        <br>&emsp;<br>&emsp;Then you can't send more, please click on "Restart Conversation" to clear and restart
        the dialog box.
        <br>&emsp;If you have any questions, please contact us!
        <br>&emsp;P.S. Temporarily unavailable. It'll be deployed on the server soon.
      </p>
    </div>
  </div>
  <hr>
  <div class="row" style="margin-left:-3em">
    <div class="large-12 columns">
      <h1 style="font-size:30px; color:grey; font-weight: 200;margin-left:2em" align="left">Video</h1>
      <div class="auto-resizable-iframe">
        <div class="large-2 columns" style="margin-left: 0px;margin-top:4em;width: 400px;">
          <iframe frameborder="0" allowfullscreen="" src="https://www.youtube.com/embed/Chinese_Version"></iframe>
        </div>
        <div class="large-2 columns" style="margin-left: 400px; margin-top:-12.1em;width: 400px;">
          <iframe frameborder="0" allowfullscreen="" src="https://www.youtube.com/embed/English_Version"></iframe>
        </div>
      </div>
    </div>
  </div>
  <br>
  <hr>
  <h1 style="font-size:30px; color:grey; font-weight: 200;margin-left:0.8em">Demonstration</h1>
  <div class="columns">
    <div class="column">
      <select class="form-control" id="chatbot_select" style="margin-left: 0.5em;">
        <option selected="selected" disabled="disabled" style="display: none" value="default">Please select the chat
          bot
          version, Chinese and English are available.</option>
        <option value="The Chinese Version" style="font-size: 13px;color: #666666;">&nbsp;&nbsp;&nbsp;&nbsp;The
          Chinese
          Version</option>
        <option value="The English Version" style="font-size: 13px;color: #666666;">&nbsp;&nbsp;&nbsp;&nbsp;The
          English
          Version</option>
      </select>

      <section class="hero is-info is-large has-background-light has-text-grey-dark" style="height: 100%; margin-top: 2.5em; overflow: auto; display: none;" id="English_chatbot">
        <div id="parent" class="hero-body" style="overflow: auto; height: calc(100% - 76px); padding-top: 1em; padding-bottom: 0em;"><article class="media"><div class="media-content"><div class="content"><p><strong>Instructions</strong><br>Enter an English message, and the model will respond interactively.</p></div></div></article><article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article></div>
        <div class="hero-foot column is-three-fifths is-offset-one-fifth" style="overflow: auto;">

          <form id="interact">
            <div class="field is-grouped">
              <p class="control is-expanded">
                <input for="userIn" style="font-size: 1em;" class="input" type="text" name="userIn" id="userIn" placeholder="Type in an English message">
              </p>
              <p class="control">
                <input id="respond" style="padding-left: 2.8em;padding-right: 2.8em;" onclick="ajax_submit();" type="button" value="Send" class="button has-text-white-ter has-background-grey-dark">
                
              </p>
              <p class="control">
                <button id="restart" style="padding-left: 2.8em;padding-right: 2.8em;" type="reset" class="button has-text-white-ter has-background-grey-dark">
                  Restart Conversation
                </button>
              </p>
            </div>
          </form>
        </div>
      </section>

      <section style="height: 100%; margin-top: 2.5em; overflow: auto; display: none;" id="Chinese_chatbot" class="hero is-info is-large has-background-light has-text-grey-dark">
        <div id="Chinese_parent" class="hero-body" style="overflow: auto; height: calc(100% - 76px); padding-top: 1em; padding-bottom: 0em;"><article class="media"><div class="media-content"><div class="content"><p><strong>Instructions</strong><br>Enter a Chinese message, and the model will respond interactively.</p></div></div></article><article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article></div>
        <div class="hero-foot column is-three-fifths is-offset-one-fifth" style="overflow: auto;">

          <form id="Chinese_interact">
            <div class="field is-grouped">
              <p class="control is-expanded">
                <input for="userIn" style="font-size: 1em;" class="input" type="text" name="userIn" id="Chinese_userIn" placeholder="Type in a Chinese message">
              </p>
              <p class="control">
                <input id="Chinese_respond" style="padding-left: 2.8em;padding-right: 2.8em;" onclick="Chinese_ajax_submit();" type="button" value="Send" class="button has-text-white-ter has-background-grey-dark">
                
              </p>
              <p class="control">
                <button id="Chinese_restart" style="padding-left: 2.8em;padding-right: 2.8em;" type="reset" class="button has-text-white-ter has-background-grey-dark">
                  Restart Conversation
                </button>
              </p>
            </div>
          </form>
        </div>
      </section></div>
      

    </div>
  </div>
  <br><br>
<br><br>
  <hr>
  <script type="text/javascript" language="javascript">
    var dialog_history = [];
    $('#chatbot_select').on('change', function () {
      dialog_history = [];
      var text = document.getElementById("chatbot_select").value;
      if (text == "The English Version") {
        dialog_history = [];
        var English_chatbot = document.getElementById("English_chatbot");
        var Chinese_chatbot = document.getElementById("Chinese_chatbot");
        English_chatbot.style.display = "";
        Chinese_chatbot.style.display = "None";
        document.getElementById('userIn').value = "";
        var parDiv = document.getElementById("parent");
        parDiv.innerHTML = '';
        parDiv.append(createChatRow("Instructions", "Enter an English message, and the model will respond interactively."));
        parDiv.scrollTo(0, parDiv.scrollHeight);

        var dialog_history_json = JSON.stringify(dialog_history);
        $.ajax({
          type: "post",  //数据提交方式（post/get）
          url: "http://172.18.167.4:8080/English_chatbot_api/",  //提交到的url，这里应填写服务器地址
          data: { "userIn": dialog_history_json },//提交的数据
          dataType: "json",
          traditional: true,
          beforeSend: function () {
            document.getElementById('userIn').value = "";
            var parDiv = document.getElementById("parent");
            parDiv.innerHTML += '<article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article>';
          }, //等待动画
          success: function (data) {
            // Change info for Model response
            $('#load').remove();
            var parDiv = document.getElementById("parent");
            // Change info for Model response

            dialog_history.push(data.modelOut[0]);
            parDiv.append(createChatRow("Model", data.modelOut));
            parDiv.scrollTo(0, parDiv.scrollHeight);
          },
          error: function () {
            $('#load').remove();
            alert("ERROR!");
          }
        })
      }
      if (text == "The Chinese Version") {
        var Chinese_chatbot = document.getElementById("Chinese_chatbot");
        var English_chatbot = document.getElementById("English_chatbot");
        Chinese_chatbot.style.display = "";
        English_chatbot.style.display = "None";
        dialog_history = [];
        document.getElementById('Chinese_userIn').value = "";
        var parDiv = document.getElementById("Chinese_parent");
        parDiv.innerHTML = '';
        parDiv.append(Chinese_createChatRow("Instructions", "Enter a Chinese message, and the model will respond interactively."));
        parDiv.scrollTo(0, parDiv.scrollHeight);

        var dialog_history_json = JSON.stringify(dialog_history);
        $.ajax({
          type: "post",  //数据提交方式（post/get）
          url: "http://172.18.167.4:8080/Chinese_chatbot_api/",//提交到的url，这里应填写服务器地址
          data: { "userIn": dialog_history_json },//提交的数据
          //contentType: "application/json; charset=utf-8",
          dataType: "json",//返回的数据类型格式
          traditional: true,
          beforeSend: function () {
            document.getElementById('Chinese_userIn').value = "";
            var parDiv = document.getElementById("Chinese_parent");
            parDiv.innerHTML += '<article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article>';
          }, //等待动画
          success: function (data) {
            // Change info for Model response
            $('#load').remove();
            var parDiv = document.getElementById("Chinese_parent");
            // Change info for Model response

            dialog_history.push(data.modelOut[0]);
            parDiv.append(Chinese_createChatRow("Model", data.modelOut));
            parDiv.scrollTo(0, parDiv.scrollHeight);
          },
          error: function () {
            $('#load').remove();
            alert("ERROR!");
          }
        })
      }

    })

    //英文版本的聊天机器人

    function ajax_submit() {
      var text = document.getElementById("userIn").value;
      dialog_history.push(text);
      var dialog_history_json = JSON.stringify(dialog_history);
      $.ajax({
        type: "post",  //数据提交方式（post/get）
        url: "http://172.18.167.4:8080/English_chatbot_api/",//提交到的url，这里应填写服务器地址
        data: { "userIn": dialog_history_json },//提交的数据
        //contentType: "application/json; charset=utf-8",
        dataType: "json",//返回的数据类型格式
        traditional: true,
        beforeSend: function () {
          document.getElementById('userIn').value = "";
          var parDiv = document.getElementById("parent");
          parDiv.append(createChatRow("You", text));
          parDiv.innerHTML += '<article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article>';
        }, //等待动画
        success: function (data) {
          // Change info for Model response
          $('#load').remove();
          var parDiv = document.getElementById("parent");
          var i;
          for (i = 0; i < data.modelOut.length; i++) {
            dialog_history.push(data.modelOut[i]);
            parDiv.append(createChatRow("Model", data.modelOut[i]));
          }
          if (data.modelOut.length > 1) {
            dialog_history = [];
          }

          parDiv.scrollTo(0, parDiv.scrollHeight);
        },
        error: function () {
          $('#load').remove();
          alert("ERROR!");
        }
      })

    }
    function createChatRow(agent, text) {
      {
        var article = document.createElement("article");
        article.className = "media"
        var figure = document.createElement("figure");
        figure.className = "media-left";
        var span = document.createElement("span");
        span.className = "icon is-large";
        var icon = document.createElement("i");
        icon.className = "fas fas fa-2x" + (agent === "You" ? " fa-user " : agent === "Model" ? " fa-robot" : "");
        var media = document.createElement("div");
        media.className = "media-content";
        var content = document.createElement("div");
        content.className = "content";
        var para = document.createElement("p");
        var paraText = document.createTextNode(text);
        var strong = document.createElement("strong");
        strong.innerHTML = agent;
        var br = document.createElement("br");
        para.appendChild(strong);
        para.appendChild(br);
        para.appendChild(paraText);
        content.appendChild(para);
        media.appendChild(content);
        span.appendChild(icon);
        figure.appendChild(span);
        if (agent !== "Instructions") {
          {
            article.appendChild(figure);
          }
        };
        article.appendChild(media);
        return article;
      }
    }

    document.getElementById("interact").addEventListener("reset", function (event) {
      {
        event.preventDefault()
        var text = document.getElementById("userIn").value;
        document.getElementById('userIn').value = "";
        var parDiv = document.getElementById("parent");
        parDiv.innerHTML = '';
        dialog_history = [];
        parDiv.append(createChatRow("Instructions", "Enter an English message, and the model will respond interactively."));
        parDiv.scrollTo(0, parDiv.scrollHeight);
        var dialog_history_json = JSON.stringify(dialog_history);
        $.ajax({
          type: "post",  //数据提交方式（post/get）
          url: "http://172.18.167.4:8080/English_chatbot_api/",//提交到的url，这里应填写服务器地址
          data: { "userIn": dialog_history_json },//提交的数据
          //contentType: "application/json; charset=utf-8",
          dataType: "json",//返回的数据类型格式
          traditional: true,
          beforeSend: function () {
            document.getElementById('userIn').value = "";
            var parDiv = document.getElementById("parent");
            parDiv.innerHTML += '<article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article>';
          }, //等待动画
          success: function (data) {
            // Change info for Model response
            $('#load').remove();
            var parDiv = document.getElementById("parent");
            // Change info for Model response

            dialog_history.push(data.modelOut[0]);
            parDiv.append(createChatRow("Model", data.modelOut));
            parDiv.scrollTo(0, parDiv.scrollHeight);
          },
          error: function () {
            $('#load').remove();
            alert("ERROR!");
          }
        })
      }
    });

    //中文版本的聊天机器人
    function Chinese_ajax_submit() {
      var text = document.getElementById("Chinese_userIn").value;
      dialog_history.push(text);
      var dialog_history_json = JSON.stringify(dialog_history);
      $.ajax({
        type: "post",  //数据提交方式（post/get）
        url: "http://172.18.167.4:8080/Chinese_chatbot_api/",//提交到的url，这里应填写服务器地址
        data: { "userIn": dialog_history_json },//提交的数据
        //contentType: "application/json; charset=utf-8",
        dataType: "json",//返回的数据类型格式
        traditional: true,
        beforeSend: function () {
          document.getElementById('Chinese_userIn').value = "";
          var parDiv = document.getElementById("Chinese_parent");
          parDiv.append(Chinese_createChatRow("You", text));
          parDiv.innerHTML += '<article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article>';
        }, //等待动画
        success: function (data) {
          // Change info for Model response
          $('#load').remove();
          var parDiv = document.getElementById("Chinese_parent");
          var i;
          for (i = 0; i < data.modelOut.length; i++) {
            dialog_history.push(data.modelOut[i]);
            parDiv.append(Chinese_createChatRow("Model", data.modelOut[i]));
          }
          if (data.modelOut.length > 1) {
            dialog_history = [];
          }

          parDiv.scrollTo(0, parDiv.scrollHeight);
        },
        error: function () {
          $('#load').remove();
          alert("ERROR!");
        }
      })

    }
    function Chinese_createChatRow(agent, text) {
      {
        var article = document.createElement("article");
        article.className = "media"
        var figure = document.createElement("figure");
        figure.className = "media-left";
        var span = document.createElement("span");
        span.className = "icon is-large";
        var icon = document.createElement("i");
        icon.className = "fas fas fa-2x" + (agent === "You" ? " fa-user " : agent === "Model" ? " fa-robot" : "");
        var media = document.createElement("div");
        media.className = "media-content";
        var content = document.createElement("div");
        content.className = "content";
        var para = document.createElement("p");
        var paraText = document.createTextNode(text);
        var strong = document.createElement("strong");
        strong.innerHTML = agent;
        var br = document.createElement("br");
        para.appendChild(strong);
        para.appendChild(br);
        para.appendChild(paraText);
        content.appendChild(para);
        media.appendChild(content);
        span.appendChild(icon);
        figure.appendChild(span);
        if (agent !== "Instructions") {
          {
            article.appendChild(figure);
          }
        };
        article.appendChild(media);
        return article;
      }
    }

    document.getElementById("Chinese_interact").addEventListener("reset", function (event) {
      {
        event.preventDefault()
        var text = document.getElementById("Chinese_userIn").value;
        document.getElementById('Chinese_userIn').value = "";
        var parDiv = document.getElementById("Chinese_parent");
        parDiv.innerHTML = '';
        dialog_history = [];
        parDiv.append(Chinese_createChatRow("Instructions", "Enter a Chinese message, and the model will respond interactively."));
        parDiv.scrollTo(0, parDiv.scrollHeight);
        var dialog_history_json = JSON.stringify(dialog_history);
        $.ajax({
          type: "post",  //数据提交方式（post/get）
          url: "http://172.18.167.4:8080/Chinese_chatbot_api/",//提交到的url，这里应填写服务器地址
          data: { "userIn": dialog_history_json },//提交的数据
          //contentType: "application/json; charset=utf-8",
          dataType: "json",//返回的数据类型格式
          traditional: true,
          beforeSend: function () {
            document.getElementById('Chinese_userIn').value = "";
            var parDiv = document.getElementById("Chinese_parent");
            parDiv.innerHTML += '<article id="load" class="media"><figure class="media-left"><span class="icon is-large"><svg class="svg-inline--fa fa-robot fa-w-20 fa-2x" aria-hidden="true" data-prefix="fas" data-icon="robot" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M0 256v128c0 17.7 14.3 32 32 32h32V224H32c-17.7 0-32 14.3-32 32zM464 96H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H176c-44.2 0-80 35.8-80 80v272c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V176c0-44.2-35.8-80-80-80zM256 416h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm128 120h-64v-32h64v32zm96 0h-64v-32h64v32zm-32-120c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm192-72h-32v192h32c17.7 0 32-14.3 32-32V256c0-17.7-14.3-32-32-32z"></path></svg><!-- <i class="fas fas fa-2x fa-robot"></i> --></span></figure><div class="media-content"><div class="content"><p><strong>Model</strong><br><img src="/static/img/load.gif" style="margin-top:-4em;margin-left:-4em;transform:scale(0.1)"></p></div></div></article>';
          }, //等待动画
          success: function (data) {
            // Change info for Model response
            $('#load').remove();
            var parDiv = document.getElementById("Chinese_parent");
            // Change info for Model response

            dialog_history.push(data.modelOut[0]);
            parDiv.append(Chinese_createChatRow("Model", data.modelOut));
            parDiv.scrollTo(0, parDiv.scrollHeight);
          },
          error: function () {
            $('#load').remove();
            alert("ERROR!");
          }
        })
      }
    });
  </script>


  <script>
    $(function () {
      $('a[href*=#]:not([href=#])').click(function () {
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
          var target = $(this.hash);
          target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
          if (target.length) {
            $('html,body').animate({
              scrollTop: target.offset().top
            }, 1000);
            return false;
          }
        }
      });
    });
  </script>


  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-63638588-1', 'auto');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript" src="/static/js/jquery.min.js"></script>
  <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>


</body>

</html>
